<%- include('../../layouts/main', { content: `
<style>
.article-container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; }
.article-layout { display: grid; grid-template-columns: 1fr 350px; gap: 3rem; }
.article-main { min-width: 0; }
.article-header { margin-bottom: 2rem; }
.article-category { display: inline-block; padding: 0.5rem 1rem; background: #9b59b6; color: white; border-radius: 20px; font-size: 0.9rem; margin-bottom: 1rem; }
.article-title { font-size: 2.5rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.2; }
.article-meta { display: flex; flex-wrap: wrap; gap: 1.5rem; color: #7f8c8d; font-size: 0.95rem; padding-bottom: 1rem; border-bottom: 2px solid #ecf0f1; }
.article-featured-image { width: 100%; height: 400px; object-fit: cover; border-radius: 8px; margin: 2rem 0; }
.article-content { background: white; padding: 2rem; border-radius: 8px; line-height: 1.8; font-size: 1.1rem; color: #34495e; }

.case-study-section {
  background: white;
  padding: 2rem;
  border-radius: 8px;
  margin-bottom: 2rem;
}

.case-study-section h2 {
  color: #9b59b6;
  border-bottom: 2px solid #9b59b6;
  padding-bottom: 0.5rem;
  margin-bottom: 1.5rem;
}

.client-info {
  background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
  color: white;
  padding: 2rem;
  border-radius: 8px;
  margin: 2rem 0;
}

.client-info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin-top: 1rem;
}

.client-info-item {
  text-align: center;
}

.client-info-item .label {
  font-size: 0.9rem;
  opacity: 0.9;
  margin-bottom: 0.5rem;
}

.client-info-item .value {
  font-size: 1.8rem;
  font-weight: 600;
}

.before-after {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.before-after-column {
  text-align: center;
}

.before-after-column h3 {
  margin-bottom: 1rem;
  padding: 0.75rem;
  border-radius: 8px;
}

.before-column h3 {
  background: #e74c3c;
  color: white;
}

.after-column h3 {
  background: #27ae60;
  color: white;
}

.metrics-grid {
  display: grid;
  gap: 1rem;
  margin-top: 1rem;
}

.metric-item {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.metric-label {
  font-weight: 500;
  color: #2c3e50;
}

.metric-value {
  font-size: 1.3rem;
  font-weight: 600;
}

.before-column .metric-value {
  color: #e74c3c;
}

.after-column .metric-value {
  color: #27ae60;
}

.improvement {
  background: #27ae60;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  margin-left: 0.5rem;
}

.before-after-images {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.before-after-images img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 8px;
}

.timeline {
  position: relative;
  padding-left: 2rem;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: #9b59b6;
}

.timeline-item {
  position: relative;
  margin-bottom: 2rem;
  padding-left: 1.5rem;
}

.timeline-item::before {
  content: '';
  position: absolute;
  left: -2rem;
  top: 0;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #9b59b6;
  border: 3px solid white;
  box-shadow: 0 0 0 2px #9b59b6;
}

.timeline-date {
  font-weight: 600;
  color: #9b59b6;
  margin-bottom: 0.5rem;
}

.timeline-milestone {
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 0.5rem;
}

.timeline-description {
  color: #7f8c8d;
  line-height: 1.6;
}

.testimonial {
  background: #f8f9fa;
  padding: 2rem;
  border-left: 4px solid #9b59b6;
  border-radius: 4px;
  margin: 2rem 0;
  position: relative;
}

.testimonial::before {
  content: '"';
  position: absolute;
  top: -10px;
  left: 1rem;
  font-size: 4rem;
  color: #9b59b6;
  opacity: 0.2;
}

.testimonial-content {
  font-size: 1.2rem;
  font-style: italic;
  color: #2c3e50;
  margin-bottom: 1rem;
  position: relative;
  z-index: 1;
}

.testimonial-rating {
  color: #f39c12;
  font-size: 1.5rem;
}

@media (max-width: 768px) {
  .article-layout { grid-template-columns: 1fr; }
  .before-after { grid-template-columns: 1fr; }
}
</style>

<div class="article-container">
  <div class="article-layout">
    <div class="article-main">
      <article>
        <div class="article-header">
          <span class="article-category">üìä Studiu de Caz</span>
          <h1 class="article-title"><%= post.title %></h1>

          <div class="article-meta">
            <span>‚úçÔ∏è <%= post.author?.name || 'Admin' %></span>
            <span>üìÖ <%= new Date(post.publishedAt).toLocaleDateString('ro-RO', { year: 'numeric', month: 'long', day: 'numeric' }) %></span>
            <span>üìñ <%= post.readingTime %> min citire</span>
            <span>üëÅÔ∏è <%= post.views %> vizualizƒÉri</span>
          </div>
        </div>

        <% if (post.featuredImage) { %>
          <img src="<%= post.featuredImage %>" alt="<%= post.title %>" class="article-featured-image">
        <% } %>

        <!-- Client Info -->
        <% if (post.caseStudyData) { %>
          <div class="client-info">
            <h2 style="color: white; border: none; padding: 0; margin-bottom: 1rem;">Informa»õii Client</h2>
            <div class="client-info-grid">
              <% if (post.caseStudyData.clientName) { %>
                <div class="client-info-item">
                  <div class="label">Nume</div>
                  <div class="value"><%= post.caseStudyData.clientName %></div>
                </div>
              <% } %>
              <% if (post.caseStudyData.clientAge) { %>
                <div class="client-info-item">
                  <div class="label">V√¢rstƒÉ</div>
                  <div class="value"><%= post.caseStudyData.clientAge %> ani</div>
                </div>
              <% } %>
              <% if (post.caseStudyData.duration) { %>
                <div class="client-info-item">
                  <div class="label">DuratƒÉ Program</div>
                  <div class="value"><%= post.caseStudyData.duration %></div>
                </div>
              <% } %>
            </div>
          </div>

          <!-- Before/After Metrics -->
          <% if (post.caseStudyData.beforeMetrics && post.caseStudyData.afterMetrics) { %>
            <div class="case-study-section">
              <h2>üìà Rezultate MƒÉsurabile</h2>
              <div class="before-after">
                <div class="before-after-column before-column">
                  <h3>üìâ √énainte</h3>
                  <div class="metrics-grid">
                    <% if (post.caseStudyData.beforeMetrics.weight) { %>
                      <div class="metric-item">
                        <span class="metric-label">Greutate</span>
                        <span class="metric-value"><%= post.caseStudyData.beforeMetrics.weight %> kg</span>
                      </div>
                    <% } %>
                    <% if (post.caseStudyData.beforeMetrics.bmi) { %>
                      <div class="metric-item">
                        <span class="metric-label">IMC</span>
                        <span class="metric-value"><%= post.caseStudyData.beforeMetrics.bmi %></span>
                      </div>
                    <% } %>
                    <% if (post.caseStudyData.beforeMetrics.bodyFat) { %>
                      <div class="metric-item">
                        <span class="metric-label">GrƒÉsime CorporalƒÉ</span>
                        <span class="metric-value"><%= post.caseStudyData.beforeMetrics.bodyFat %>%</span>
                      </div>
                    <% } %>
                  </div>
                  <% if (post.caseStudyData.beforeImages && post.caseStudyData.beforeImages.length > 0) { %>
                    <div class="before-after-images">
                      <% post.caseStudyData.beforeImages.forEach(img => { %>
                        <img src="<%= img %>" alt="√énainte">
                      <% }) %>
                    </div>
                  <% } %>
                </div>

                <div class="before-after-column after-column">
                  <h3>üìà DupƒÉ</h3>
                  <div class="metrics-grid">
                    <% if (post.caseStudyData.afterMetrics.weight) { %>
                      <div class="metric-item">
                        <span class="metric-label">Greutate</span>
                        <span class="metric-value">
                          <%= post.caseStudyData.afterMetrics.weight %> kg
                          <% if (post.caseStudyData.beforeMetrics.weight) { %>
                            <span class="improvement">
                              <%= (post.caseStudyData.beforeMetrics.weight - post.caseStudyData.afterMetrics.weight).toFixed(1) %> kg
                            </span>
                          <% } %>
                        </span>
                      </div>
                    <% } %>
                    <% if (post.caseStudyData.afterMetrics.bmi) { %>
                      <div class="metric-item">
                        <span class="metric-label">IMC</span>
                        <span class="metric-value"><%= post.caseStudyData.afterMetrics.bmi %></span>
                      </div>
                    <% } %>
                    <% if (post.caseStudyData.afterMetrics.bodyFat) { %>
                      <div class="metric-item">
                        <span class="metric-label">GrƒÉsime CorporalƒÉ</span>
                        <span class="metric-value"><%= post.caseStudyData.afterMetrics.bodyFat %>%</span>
                      </div>
                    <% } %>
                  </div>
                  <% if (post.caseStudyData.afterImages && post.caseStudyData.afterImages.length > 0) { %>
                    <div class="before-after-images">
                      <% post.caseStudyData.afterImages.forEach(img => { %>
                        <img src="<%= img %>" alt="DupƒÉ">
                      <% }) %>
                    </div>
                  <% } %>
                </div>
              </div>
            </div>
          <% } %>

          <!-- Timeline -->
          <% if (post.caseStudyData.timeline && post.caseStudyData.timeline.length > 0) { %>
            <div class="case-study-section">
              <h2>üìÖ Cronologie</h2>
              <div class="timeline">
                <% post.caseStudyData.timeline.forEach(item => { %>
                  <div class="timeline-item">
                    <div class="timeline-date">
                      <%= new Date(item.date).toLocaleDateString('ro-RO', { year: 'numeric', month: 'long', day: 'numeric' }) %>
                    </div>
                    <div class="timeline-milestone"><%= item.milestone %></div>
                    <div class="timeline-description"><%= item.description %></div>
                  </div>
                <% }) %>
              </div>
            </div>
          <% } %>

          <!-- Testimonial -->
          <% if (post.caseStudyData.testimonial && post.caseStudyData.testimonial.content) { %>
            <div class="testimonial">
              <div class="testimonial-content">
                <%= post.caseStudyData.testimonial.content %>
              </div>
              <% if (post.caseStudyData.testimonial.rating) { %>
                <div class="testimonial-rating">
                  <% for (let i = 0; i < post.caseStudyData.testimonial.rating; i++) { %>‚≠ê<% } %>
                </div>
              <% } %>
            </div>
          <% } %>
        <% } %>

        <!-- Additional Content -->
        <% if (post.content) { %>
          <div class="article-content">
            <%- post.content %>
          </div>
        <% } %>

        <div class="article-share" style="background: #ecf0f1; padding: 1.5rem; border-radius: 8px; margin: 2rem 0; text-align: center;">
          <h3>Distribuie acest studiu de caz</h3>
          <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem;">
            <a href="https://www.facebook.com/sharer/sharer.php?u=<%= encodeURIComponent(seo.canonicalUrl) %>"
               target="_blank"
               style="padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; color: white; font-weight: 500; background: #1877f2;">Facebook</a>
          </div>
        </div>
      </article>

      <%- include('../partials/comments-section', { post, comments }) %>
    </div>

    <%- include('../partials/sidebar', { categories, popularPosts, tags: [], filters: {} }) %>
  </div>
</div>
` }) %>
